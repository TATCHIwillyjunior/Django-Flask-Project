// game/templates/game/story_list.html
{% extends "game/base.html" %}

{% block title %}Story List{% endblock %}

{% block content %}
    <div class="nav-bar">
        <h1>Stories</h1>
        <a href="{% url 'stats' %}" class="btn">View Stats</a>
    </div>

    <div class="search-filter">
        <input type="text" name="q" placeholder="Search stories..." value="{{ query }}">
        <button type="submit" class="btn">Search</button>
    </div>

    {% if stories %}
        {% for story in stories %}
            <div class="story-card">
                <div style="display: flex; justify-content: space-between; align-items: flex-start;">
                    <div style="flex-grow: 1;">
                        <h2 style="margin-top: 0;"><a href="{% url 'play_story' story.id %}">{{ story.title }}</a></h2>
                        <p>{{ story.description }}</p>
                    </div>
                    <div class="story-actions">
                        <form method="POST" action="{% url 'delete_story' story.id %}" onsubmit="return confirm('Are you sure you want to delete this story? This cannot be undone.')">
                            {% csrf_token %}
                            <button type="submit" class="btn btn-danger">Delete</button>
                        </form>
                    </div>
                </div>
            </div>
        {% endfor %}
    {% else %}
        <div class="story-card">
            <p>No stories found.</p>
        </div>
    {% endif %}
{% endblock %}
